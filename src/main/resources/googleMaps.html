<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Google Maps</title>
  <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
  <style type="text/css">
    html { height: 100% }
    body { height: 100%; margin: 0; padding: 0 }
    #map-canvas { height: 100% }
  </style>
  <script type="text/javascript"
          src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB7V8e9xgXmPeYdcqWSdketYQ022xm9NRc&sensor=false">
  </script>
  <script type="text/javascript">
    var map;
    var markerNum = 0;
    var directionsService;
    var directionsDisplay;
    //alert(directionsService.toString());
    function initialize() {
      var mapOptions = {
        center: new google.maps.LatLng(40.785091, -73.968285),
        zoom: 4,
        //The below code enables night mode. Design decision, comment out if we don't like it
        styles: [
          {elementType: 'geometry', stylers: [{color: '#242f3e'}]},
          {elementType: 'labels.text.stroke', stylers: [{color: '#242f3e'}]},
          {elementType: 'labels.text.fill', stylers: [{color: '#746855'}]},
          {
            featureType: 'administrative.locality',
            elementType: 'labels.text.fill',
            stylers: [{color: '#d59563'}]
          },
          {
            featureType: 'poi',
            elementType: 'labels.text.fill',
            stylers: [{color: '#d59563'}]
          },
          {
            featureType: 'poi.park',
            elementType: 'geometry',
            stylers: [{color: '#263c3f'}]
          },
          {
            featureType: 'poi.park',
            elementType: 'labels.text.fill',
            stylers: [{color: '#6b9a76'}]
          },
          {
            featureType: 'road',
            elementType: 'geometry',
            stylers: [{color: '#38414e'}]
          },
          {
            featureType: 'road',
            elementType: 'geometry.stroke',
            stylers: [{color: '#212a37'}]
          },
          {
            featureType: 'road',
            elementType: 'labels.text.fill',
            stylers: [{color: '#9ca5b3'}]
          },
          {
            featureType: 'road.highway',
            elementType: 'geometry',
            stylers: [{color: '#746855'}]
          },
          {
            featureType: 'road.highway',
            elementType: 'geometry.stroke',
            stylers: [{color: '#1f2835'}]
          },
          {
            featureType: 'road.highway',
            elementType: 'labels.text.fill',
            stylers: [{color: '#f3d19c'}]
          },
          {
            featureType: 'transit',
            elementType: 'geometry',
            stylers: [{color: '#2f3948'}]
          },
          {
            featureType: 'transit.station',
            elementType: 'labels.text.fill',
            stylers: [{color: '#d59563'}]
          },
          {
            featureType: 'water',
            elementType: 'geometry',
            stylers: [{color: '#17263c'}]
          },
          {
            featureType: 'water',
            elementType: 'labels.text.fill',
            stylers: [{color: '#515c6d'}]
          },
          {
            featureType: 'water',
            elementType: 'labels.text.stroke',
            stylers: [{color: '#17263c'}]
          }]
      };

      map = new google.maps.Map(document.getElementById("map-canvas"),
          mapOptions);
      map.setZoom(12);

      directionsService = new google.maps.DirectionsService;
      directionsDisplay = new google.maps.DirectionsRenderer;

      directionsDisplay.setMap(map);
      //createMarker(40.785091, -73.968285,'Test Marker');

      //Create marker on click
      google.maps.event.addListener(map,'click',function(event) {
        markerNum++;
        createMarker(event.latLng.lat(),event.latLng.lng(),'Marker ' + markerNum);
      });

      displayRoute(40.785091,-73.968285,40.785091, -73.568285);
    }

    function createMarker(lat,lng,title) {
      var myLatLng = new google.maps.LatLng(lat, lng);
      //alert("lat: " + lat + "\nlng: " + lng + "\nLocation: " + myLatLng);
      var marker = new google.maps.Marker({
        position: myLatLng,
        map:map,
        title: title
      });
    }

    function displayRoute(startLat,startLng,endLat,endLng) {
    //function calculateAndDisplayRoute(directionsService, directionsDisplay) {
      var startLocation = startLat + "," + startLng;
      var endLocation = endLat + "," + endLng;
      directionsService.route({
        origin: startLocation,
        destination: endLocation,
        travelMode: 'BICYCLING'
      }, function(response, status) {
        //alert("as");
        if (status === 'OK') {
          directionsDisplay.setDirections(response);
        } else {
          window.alert('Directions request failed due to ' + status);
        }
      });
      //alert("Test");
    }

    //initialize();
    google.maps.event.addDomListener(window, 'load', initialize);
    //google.maps.event.addListener(window, 'click', function(event) {
    //  alert(event.latLng);  // in event.latLng  you have the coordinates of click
    //});
  </script>
</head>
<body>
<div id="map-canvas"/>
</body>
</html>